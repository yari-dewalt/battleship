(()=>{"use strict";class t{constructor(){this.board=Array.from({length:10},(()=>Array(10).fill(""))),this.ships=[],this.missedAttacks=[]}placeShip(t,e,s,r){if(this.isValidPlacement(t,e,s,r)){for(let i=0;i<t.length;i++)"horizontal"===r?this.board[e][s+i]=t:this.board[e+i][s]=t;return this.ships.push({ship:t,row:e,col:s,orientation:r}),!0}return!1}isValidPlacement(t,e,s,r){if("horizontal"===r&&s+t.length>10||"vertical"===r&&e+t.length>10)return!1;for(let i=0;i<t.length;i++){if("horizontal"===r&&""!=this.board[e][s+i])return!1;if("vertical"===r&&""!=this.board[e+i][s])return!1}return!0}receiveAttack(t,e){for(const s of this.ships){const{ship:r,row:i,col:a,orientation:o}=s;if("horizontal"===o&&t===i&&e>=a&&e<a+r.length||"vertical"===o&&e===a&&t>=i&&t<i+r.length)return r.hit(),this.board[t][e]="hit",!0}return this.missedAttacks.push({row:t,col:e}),this.board[t][e]="miss",!1}allShipsSunk(){return this.ships.every((t=>t.ship.isSunk()))}}class e{constructor(t){this.length=t,this.num_hits=0,this.is_sunk=!1}hit(){return this.num_hits++,this.num_hits}isSunk(){return this.num_hits===this.length&&(this.is_sunk=!0),this.is_sunk}}const s=document.getElementsByClassName("gameboard")[0],r=new class{constructor(){this.gameboard=new t,this.isTurn=!0}createShip(t){let s=new e(t);return this.gameboard.ships.push(s),s}makeMove(t,e,s){t.receiveAttack(e,s)}},i=new class{constructor(){this.gameboard=new t,this.previousAttacks=[],this.isTurn=!1}makeMove(t){let e=Math.floor(10*Math.random()),s=Math.floor(10*Math.random());for(;this.hasAttackedBefore(e,s);)e=Math.floor(10*Math.random()),s=Math.floor(10*Math.random());t.receiveAttack(e,s),this.previousAttacks.push({randomRow:e,randomCol:s})}hasAttackedBefore(t,e){return this.previousAttacks.some((s=>s.row===t&&s.col===e))}};let a=r.createShip(2);function o(t){for(;s.lastChild;)s.removeChild(s.lastChild);for(let e=0;e<t.board.length;e++){let r=document.createElement("div");r.className="grid-row";for(let s=0;s<t.board[e].length;s++){let i=document.createElement("div");i.className="grid-square";let a=document.createElement("div");""==t.board[e][s]?a.className="square-identity water":"miss"===t.board[e][s]?a.className="square-identity miss":"hit"===t.board[e][s]?a.className="square-identity hit":a.className="square-identity ship",i.appendChild(a),r.appendChild(i)}s.appendChild(r)}}r.gameboard.placeShip(a,2,2,"horizontal"),o(r.gameboard),i.makeMove(r.gameboard),o(r.gameboard)})();